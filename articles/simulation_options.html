<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulation Options • DataFakeR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Simulation Options">
<meta property="og:description" content="DataFakeR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DataFakeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-thumbs-o-up"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/main.html">Welcome</a>
    </li>
    <li>
      <a href="../articles/datafaker_workflow.html">DataFakeR workflow</a>
    </li>
    <li>
      <a href="../articles/schema_structure.html">YAML schema structure</a>
    </li>
    <li>
      <a href="../articles/structure_from_db.html">Sourcing structure from database</a>
    </li>
    <li>
      <a href="../articles/simulation_options.html">Simulation Options</a>
    </li>
    <li>
      <a href="../articles/simulation_methods.html">Simulation Methods</a>
    </li>
    <li>
      <a href="../articles/extra_parameters.html">Extra parameters</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li>
  <a href="https://github.com/openpharma/DataFakeR/issues">
    <span class="fa fa-ambulance"></span>
     
    Issues
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="simulation_options_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Simulation Options</h1>
                        <h4 class="author">Krystian Igras</h4>
            
            <h4 class="date">2021-09-20</h4>
      
      
      <div class="hidden name"><code>simulation_options.Rmd</code></div>

    </div>

    
    
<p>DataFakeR package allows to customize each step of <a href="datafaker_workflow.html">DataFakeR workflow</a>, by setting up proper options using <code>set_faker_opts</code> function (and option-related specific methods).</p>
<p>All the configurable options are stored with the default values within <code>default_faker_opts</code> object.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">default_faker_opts</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; List of 27</span>
<span class="co">#&gt;  $ opt_pull_character             :List of 5</span>
<span class="co">#&gt;  $ opt_pull_numeric               :List of 5</span>
<span class="co">#&gt;  $ opt_pull_integer               :List of 5</span>
<span class="co">#&gt;  $ opt_pull_logical               :List of 2</span>
<span class="co">#&gt;  $ opt_pull_date                  :List of 3</span>
<span class="co">#&gt;  $ opt_pull_table                 :List of 1</span>
<span class="co">#&gt;  $ opt_default_character          :List of 7</span>
<span class="co">#&gt;  $ opt_simul_spec_character       :List of 1</span>
<span class="co">#&gt;  $ opt_simul_restricted_character :List of 2</span>
<span class="co">#&gt;  $ opt_simul_default_fun_character:function (n, not_null, unique, default, nchar, type, na_ratio, levels_ratio, </span>
<span class="co">#&gt;     ...)  </span>
<span class="co">#&gt;  $ opt_default_numeric            :List of 8</span>
<span class="co">#&gt;  $ opt_simul_spec_numeric         :List of 1</span>
<span class="co">#&gt;  $ opt_simul_restricted_numeric   :List of 3</span>
<span class="co">#&gt;  $ opt_simul_default_fun_numeric  :function (n, not_null, unique, default, type, na_ratio, levels_ratio, ...)  </span>
<span class="co">#&gt;  $ opt_default_integer            :List of 6</span>
<span class="co">#&gt;  $ opt_simul_spec_integer         :List of 1</span>
<span class="co">#&gt;  $ opt_simul_restricted_integer   :List of 3</span>
<span class="co">#&gt;  $ opt_simul_default_fun_integer  :function (n, not_null, unique, default, type, na_ratio, levels_ratio, ...)  </span>
<span class="co">#&gt;  $ opt_default_logical            :List of 6</span>
<span class="co">#&gt;  $ opt_simul_spec_logical         :List of 1</span>
<span class="co">#&gt;  $ opt_simul_restricted_logical   :List of 1</span>
<span class="co">#&gt;  $ opt_simul_default_fun_logical  :function (n, not_null, unique, default, type, na_ratio, levels_ratio, ...)  </span>
<span class="co">#&gt;  $ opt_default_date               :List of 9</span>
<span class="co">#&gt;  $ opt_simul_spec_date            :List of 1</span>
<span class="co">#&gt;  $ opt_simul_restricted_date      :List of 2</span>
<span class="co">#&gt;  $ opt_simul_default_fun_date     :function (n, not_null, unique, default, type, min_date, max_date, format, </span>
<span class="co">#&gt;     na_ratio, levels_ratio, ...)  </span>
<span class="co">#&gt;  $ opt_default_table              :List of 1</span></code></pre></div>
<p>Customizable options can be divided into the main three groups:</p>
<ul>
<li>pulling database schema configuration - define what tables information should be sourced from database schema,</li>
<li>default column-type parameters - define default parameters for each column type (when skipped in YAML configuration file),</li>
<li>default table parameters - define the structure of simulated tables such as number of rows in the result,</li>
<li>column-type simulation methods configuration - define what simulation methods should be used to generate fake data.</li>
</ul>
<div id="pulling-database-schema-configuration" class="section level3">
<h3 class="hasAnchor">
<a href="#pulling-database-schema-configuration" class="anchor"></a>Pulling database schema configuration</h3>
<p>All the parameters in <code>set_faker_opts</code> prefixed with <code>opt_pull</code>:</p>
<ul>
<li>
<code>opt_pull_character</code> - specifying what information to pull for character columns,</li>
<li>
<code>opt_pull_numeric</code> - specifying what information to pull for numeric columns,</li>
<li>
<code>opt_pull_integer</code> - specifying what information to pull for integer columns,</li>
<li>
<code>opt_pull_logical</code> - specifying what information to pull for logical columns,</li>
<li>
<code>opt_pull_date</code> - specifying what information to pull for date columns,</li>
<li>
<code>opt_pull_table</code> - specifying what information to pull for tables.</li>
</ul>
<p>See <a href="structure_from_db.Rmd">Sourcing structure from database</a> for more details.</p>
</div>
<div id="default-column-type-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#default-column-type-parameters" class="anchor"></a>Default column-type parameters</h3>
<p>Looking at the single column specification of configuration YAML file:</p>
<pre><code>columns:
  column_a1:
    type: char(8)
    not_null: true
    unique: true
    ...</code></pre>
<p>you may find a list of parameters attached to each column. Such parameters are passed to each <a href="simulation_methods.html">simulation method</a> and may be used to achieve demanded form of the resulted column.</p>
<p>When the number of columns is large, it may be inconvenient to define such parameters per each column in configuration file. In order to make such configuration easier, you may define the default parameters to each column type with <code>opt_default_&lt;column-type&gt;</code> method.</p>
<p>Simply put:</p>
<pre><code>my_opts &lt;- set_faker_opts(
  opt_default_&lt;column-type&gt; = opt_default_&lt;column-type&gt;(...)
)</code></pre>
<p>The default parameters in DataFakeR can be accessed by <code>default_faker_opts$opt_default_&lt;column-type&gt;</code>.</p>
<p>For example for character type columns we have:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">default_faker_opts</span><span class="op">$</span><span class="va">opt_default_character</span>
<span class="co">#&gt; $regexp</span>
<span class="co">#&gt; [1] "text|char|factor"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $nchar</span>
<span class="co">#&gt; [1] 10</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $not_null</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $unique</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $default</span>
<span class="co">#&gt; [1] ""</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $na_ratio</span>
<span class="co">#&gt; [1] 0.05</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $levels_ratio</span>
<span class="co">#&gt; [1] 1</span></code></pre></div>
<p>That means, whenever we simulate character column and such parameters are not defined in schema YAML file you will get:</p>
<ul>
<li>
<code>nchar = 10</code>,</li>
<li>
<code>not_null = FALSE</code>,</li>
<li>
<code>unique = FALSE</code>,</li>
<li><code>default = ""</code></li>
</ul>
<p>as passed parameters and values to simulation methods.</p>
<p><strong>Column type mapping</strong></p>
<p>When looking at the default parameters list, we could find a parameter named <code>regexp</code>. This is exceptional parameter that is not passed to simulation methods but is responsible to map connection between column type defined in configuration YAML file and the target R type.</p>
<p>For example <code>default_faker_opts$opt_default_character$regexp = "text|char"</code>, means that whenever column type matches regular expression <code>"text|char"</code> such column will be treated in R as character class one.</p>
<p>You may modify this regular expression if you want to extend the mapping between source column types and the target R column class.</p>
</div>
<div id="default-table-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#default-table-parameters" class="anchor"></a>Default table parameters</h3>
<p>When simulating the data, except column specific parameters you may also want to pass parameters to the each table. One of them may be specifying number or rows that the resulted table should contain.</p>
<p>Such parameters are configurable by <code>opt_default_table</code> method. Each parameter specified by the method will be then attached to each table and used in simulation process.</p>
<p>Each parameter passed to <code>opt_default_table</code> should be either a constant value, or the function that iterates over all the tables, and returns the proper parameter value for each one.</p>
<p>So, specifying:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/faker_configuration.html">set_faker_opts</a></span><span class="op">(</span>opt_default_table <span class="op">=</span> <span class="fu"><a href="../reference/opt_default_table.html">opt_default_table</a></span><span class="op">(</span>nrows <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>will result with attaching <code>nrows = 10</code> to each table, and as a result (based on DataFakeR functionality) each simulated table will have 10 rows.</p>
<p>Setting up (the default setting):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/faker_configuration.html">set_faker_opts</a></span><span class="op">(</span>opt_default_table <span class="op">=</span> <span class="fu"><a href="../reference/opt_default_table.html">opt_default_table</a></span><span class="op">(</span>nrows <span class="op">=</span> <span class="fu"><a href="../reference/number_of_rows.html">nrows_simul_constant</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>will result with attaching <code>nrows = 10</code> to each table, whenever <code>nrows</code> was not specified in the configuration.</p>
<p>DataFakeR provides also the second method for defining number of rows <code>nrows_simul_ratio</code> that allows to calculate number of rows based on provided <code>ratio</code> and <code>total</code> number of rows in all tables together. For example speficying <code>nrows = nrows_simul_ratio(0.1, 100)</code>, will result with:</p>
<ul>
<li>
<code>0.1 * 100</code> rows when the table doesn’t have <code>nrows</code> specified in YAML file,</li>
<li>
<code>nrows * 100</code> rows when <code>nrows</code> is specified for the table, and <code>nrows</code> is between 0 and 1,</li>
<li>an error when <code>nrows</code> is specified in yaml file but is larger than 1.</li>
</ul>
<p>To understand how to create custom methods please check the definition of <code>nrows_simul_constant</code> and <code>nrows_simul_ratio</code>.</p>
<p><strong>Note</strong> The only supported <code>opt_default_table</code> parameter is <code>nrows</code>. In the future releases, the option to set up custom parameters and actively use them in the simulation process will be enabled.</p>
</div>
<div id="column-type-simulation-methods-configuration" class="section level3">
<h3 class="hasAnchor">
<a href="#column-type-simulation-methods-configuration" class="anchor"></a>Column-type simulation methods configuration</h3>
<p>The last group of configuration parameters is meant to provide an option to customize simulation methods. As presented in <a href="simulation_methods.html">simulation methods</a> page, there are four types of simulation:</p>
<ol style="list-style-type: decimal">
<li>Deterministic (formula or constraint-based) simulation.</li>
<li>Special method simulation.</li>
<li>Restricted simulation.</li>
<li>Default simulation.</li>
</ol>
<p>All the type simulation methods (except deterministic one) can be configured with the <code>set_faker_opts</code> using:</p>
<ul>
<li>
<code>opt_simul_spec_&lt;column-type&gt;</code> parameter and method to specify list of possible special simulation methods for selected column type:</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">set_faker_opts</span>(</span>
<span id="cb7-2"><a href="#cb7-2"></a>  opt_simul_spec_<span class="op">&lt;</span>column<span class="op">-</span>type<span class="op">&gt;</span><span class="st"> </span><span class="er">=</span><span class="st"> </span>opt_simul_spec_<span class="op">&lt;</span>column<span class="op">-</span>type<span class="op">&gt;</span>(</span>
<span id="cb7-3"><a href="#cb7-3"></a>    <span class="op">&lt;</span>spec<span class="op">-</span>method<span class="op">-</span>name<span class="op">&gt;</span><span class="st"> </span><span class="er">=</span><span class="st"> </span><span class="er">&lt;</span>spec<span class="op">-</span><span class="cf">function</span><span class="op">&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="st">  </span>)</span>
<span id="cb7-5"><a href="#cb7-5"></a>)</span></code></pre></div>
<ul>
<li>
<code>opt_simul_restricted_&lt;column-type&gt;</code> parameter and method to specify list of possible restricted simulation methods for selected column type:</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">set_faker_opts</span>(</span>
<span id="cb8-2"><a href="#cb8-2"></a>  opt_simul_restricted_<span class="op">&lt;</span>column<span class="op">-</span>type<span class="op">&gt;</span><span class="st"> </span><span class="er">=</span><span class="st"> </span>opt_simul_restricted_<span class="op">&lt;</span>column<span class="op">-</span>type<span class="op">&gt;</span>(</span>
<span id="cb8-3"><a href="#cb8-3"></a>    <span class="op">&lt;</span>restricted<span class="op">-</span>method<span class="op">-</span>name<span class="op">&gt;</span><span class="st"> </span><span class="er">=</span><span class="st"> </span><span class="er">&lt;</span>restricted<span class="op">-</span><span class="cf">function</span><span class="op">&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="st">  </span>)</span>
<span id="cb8-5"><a href="#cb8-5"></a>)</span></code></pre></div>
<ul>
<li>
<code>opt_simul_default_fun_&lt;column-type&gt;</code> parameter to specify default simulation method for selected column type:</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">set_faker_opts</span>(</span>
<span id="cb9-2"><a href="#cb9-2"></a>  opt_simul_default_fun_<span class="op">&lt;</span>column<span class="op">-</span>type<span class="op">&gt;</span><span class="st"> </span><span class="er">=</span><span class="st"> </span><span class="er">&lt;</span>default<span class="op">-</span><span class="cf">function</span><span class="op">&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>)</span></code></pre></div>
<p>The examples showing how to define custom methods and what each method type means are presented at <a href="simulation_methods.html">simulation methods</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Krystian Igras.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
